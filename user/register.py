from django.shortcuts import render, redirectfrom django.contrib.auth import loginfrom django.contrib.auth.models import User, Groupfrom .forms import RegisterForm, TeacherRegisterForm# Create your views here.# 普通用户注册def register_view(request):    if request.method == 'POST':        form = RegisterForm(request.POST)        if form.is_valid():            new_user = form.save()            group = Group.objects.get(name='students')            new_user.groups.add(group)            login(request, new_user)            return redirect("/")        else:            return render(request, "user/register.html", {                'form': form,            })    else:        form = RegisterForm()        return render(request, "user/register.html", {            'form': form,        })# 老师用户注册def teacher_register_view(request):    if request.method == 'POST':        form = TeacherRegisterForm(request.POST)        if form.is_valid():            new_user = form.save()            user = User.objects.get(username=form.cleaned_data['username'])            group = Group.objects.get(name='teachers')            user.groups.add(group)            login(request, new_user)            # TODO:加入权限            return redirect('/')        else:            return render(request, "user/teacher_reg.html", {                'form': form,            })    else:        form = TeacherRegisterForm()        return render(request, "user/teacher_reg.html", {            'form': form,        })